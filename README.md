# Computer Vision Pediatric_Carpogram_Disease_Image_Detection

Bone age studies are used to estimate the maturity and capacity of growth of the skeletal system performed in children and young people before reaching the end of the growth process. Carrying out this studies is of great impor- tance and is commonly done in children as bone age can be strongly related to some disorders, such as growth hormone deficiency, hypothyroidism, delays in the arrival of puberty, adrenal gland disorders, Turner’s syndrome and orthopedic and orthodontic problems in some cases. These bone age studies are better the further away from the end of growth they are made, because each time the end of growth ap- proaches, the treatment of injuries related to bone age is more difficult.

Growth studies are performed by taking an X-Ray image of the non-dominant hand of the patient, from the fingers to the wrist, called a carpogram, which look as shown in fig- ure 1. The bones of children and young people have areas of growth at both ends, which are called ”growth plates” and are changing in appearance over the years. As time goes by, growth plates become thinner until they are completely closed and they disappear, this moment is called ”closure of growth plates”. There are different methods to carry out the analysis of the images obtained, among which, the majority are based on the comparison of the appearance of the pa- tient’s image with a library of images of healthy children of the same chronological age and gender.
The aim of this project is to develop an algorithm that has the ability to read the carpogram of several patients and then perform the analysis of it to finally get the patient’s bone age which can be then used to detect possible diseases or disor- ders related to growth. Left hand radiographs used in this study were obtained from the the Standford Children’s Hospital and the Colorado Children’s hospital, with the purpose of developing new methods to analyze carpograms and do everything to help patients and improve their quality of life as much as possible.

One of the most common method of classification of bone age in patients it’s the Greulich - Pyle method. This method consists in a comparison between an specific pa- tient’s x-ray and the x-rays present in the Greulich-Pyle at- las. This atlas contains a variety of images of young people in their growth stage, specifying their age and gen- der. The comparison between the images present in the atlas and the images taken from each patient is done according to the characteristics of certain specific bones, among which we find the phalanges.
As we can see in figure 3 the phalanges change with time, not only in size but its form. The phalanges have two parts, the diaphysis and the epiphysis, these correspond to the elongated part of the bone and its ends or terminations, respectively. In newborn or young children, the diaphysis is separated from the epiphysis and with time the distance be- tween these two decreases until they are completely joined, at the time this occurs it is said that the growth of the patient is over. 
With the above mentioned, the patients hands will have certain left hand morphology if they have certain age. Thus, our approach will be based in a concept that will allow us to have the morphology of the patients hand represented in an histogram. This fundamental concept in image process- ing its the Histogram of Oriented Gradients (HOG). A His- togram of Oriented Gradients (HOG) considers that the ap- pearance and shape of the local object can often be charac- terized fairly well by the distribution of local intensity gra- dients or the directions of the edges without precise knowl- edge of the gradient or gradients. corresponding edge posi- tions. In practice, this can be achieved by dividing the im- age window into small spatial regions (cells), and for each cell by accumulating a local 1-D histogram of gradient di- rections or edge orientations on the pixels of the cell. The combined histogram entries form the representation. One way to improve the invariance of lighting and shading is to normalize the contrast of local responses before using them. This is done by accumulating a measure of the energy of the local histogram in larger spatial regions (blocks) and using the results to normalize all the cells in the block.

Moreover, once we have the HOG, we will do the classi- fication of age using another fundamental concept in im- age processing that will allow us to assign categories to the HOGs. With this in mind, support vector machine (SVM) is a discriminative classifier which separates by hy- perplanes starting from labeled training data. The result of this method is an optimal hyperplane that categorizes classes. This method uses some parameters, the first one is the regularization parameter which considers how much it is going to be avoided misclassifying each training exam- ple. It means the error range it is going to be allowed. Also there is a parameter named Gamma that defines how far the influence of a training example reaches, low value points far and high from the separation line. The last one is the mar- gin which refers to the distance from the separation line and the classes that are going to be classified, margins are better when they are equidistant to both classes.[10]. Thus, as we mentioned, this concept will be used to categorize the x-ray hand in a determined age.

Model Solution:
In order to describe our baseline algorithm we will show our results in x-ray hand of figure 2. Thus, we want to filter this image to delete noise or information that is not useful or us. In other words, we will erase the information of the image seen in figure 2 as ” Lje” and some extra hand features like the fingers, but leaving the phalanges. In order to do this we will use image processing functions such as graythresh, that will allow us to get a big portion of the hand bones because of the radiopacity of them, by giving us a normalized umbral. This umbral will me multiplied times 256 and then be applied to the image in figure 2. This will give us the figure showed in figure 4. or us. In other words, we will erase the information of the image seen in figure 2 as ” Lje” and some extra hand features like the fingers, but leaving the phalanges. In order to do this we will use image processing functions such as graythresh, that will allow us to get a big portion of the hand bones because of the radiopacity of them, by giving us a normalized umbral. This umbral will me multiplied times 256 and then be applied to the image in figure 2. This will give us the figure showed in figure 4. or us. In other words, we will erase the information of the image seen in figure 2 as ” Lje” and some extra hand features like the fingers, but leaving the phalanges. In order to do this we will use image processing functions such as graythresh, that will allow us to get a big portion of the hand bones because of the radiopacity of them, by giving us a normalized umbral. This umbral will me multiplied times 256 and then be applied to the image in figure 2. This will give us the figure showed in figure 4. Thus, once all of this is done, we will use this HOG to proceed with our categorization. In this section of our al- gorithm we will use an SVM function with a lineal kernel in order to assign probabilities to the different categories of HOG. With this in mind, we will consider the function fitcecoc that will allow us to generate different classes of categories. Thus, we will assign this categories to the age in years of the bone age. Finally, after the classes are gener- ated we will use the function predict in which we are going to put our test image and the classes generated previously.
